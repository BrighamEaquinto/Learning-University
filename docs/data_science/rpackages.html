<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.219">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Learning University - Developing R Packages</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Learning University</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-calculus-1" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Calculus 1</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-calculus-1">    
        <li>
    <a class="dropdown-item" href="../Math/Calculus_1/antiderivative.html">
 <span class="dropdown-text">Antiderivative</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/Calculus_1/chap4_derivative_applications.html">
 <span class="dropdown-text">Chap 4 Derivative Applications</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/Calculus_1/derivatives.html">
 <span class="dropdown-text">Derivatives</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/Calculus_1/formulas.html">
 <span class="dropdown-text">Formulas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/Calculus_1/integrals.html">
 <span class="dropdown-text">Integrals</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/Calculus_1/limits.html">
 <span class="dropdown-text">Limits</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/Calculus_1/trig.html">
 <span class="dropdown-text">Trig</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-multivariable-calculus" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Multivariable Calculus</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-multivariable-calculus">    
        <li>
    <a class="dropdown-item" href="../Math/Multivariable_Calculus/Master_Notes_Multivariable_Calculus.html">
 <span class="dropdown-text">Master Notes</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../Math/Linear_Algebra/linear_algebra.html">
 <span class="menu-text">Linear Algebra</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-science" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Data Science</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-science">    
        <li>
    <a class="dropdown-item" href="../data_science/dax/dax.html">
 <span class="dropdown-text">DAX</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../data_science/rpackages.html">
 <span class="dropdown-text">RPackages</span></a>
  </li>  
    </ul>
  </li>
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#chapter-1-the-r-package-structure" id="toc-chapter-1-the-r-package-structure" class="nav-link active" data-scroll-target="#chapter-1-the-r-package-structure">Chapter 1: The R Package Structure</a>
  <ul class="collapse">
  <li><a href="#use_-functions" id="toc-use_-functions" class="nav-link" data-scroll-target="#use_-functions">use_* functions</a></li>
  <li><a href="#best-practice-for-structuring-code" id="toc-best-practice-for-structuring-code" class="nav-link" data-scroll-target="#best-practice-for-structuring-code">Best practice for structuring code</a></li>
  </ul></li>
  <li><a href="#chapter-2-documenting-packages" id="toc-chapter-2-documenting-packages" class="nav-link" data-scroll-target="#chapter-2-documenting-packages">Chapter 2: Documenting Packages</a>
  <ul class="collapse">
  <li><a href="#introduction-to-roxygen2" id="toc-introduction-to-roxygen2" class="nav-link" data-scroll-target="#introduction-to-roxygen2">Introduction to roxygen2</a></li>
  <li><a href="#a-simple-function-header-code-practice" id="toc-a-simple-function-header-code-practice" class="nav-link" data-scroll-target="#a-simple-function-header-code-practice">A simple function header: Code Practice</a></li>
  <li><a href="#documenting-function-arguments-code-practice" id="toc-documenting-function-arguments-code-practice" class="nav-link" data-scroll-target="#documenting-function-arguments-code-practice">Documenting function arguments: Code Practice</a></li>
  <li><a href="#importing-other-packages-code-practice" id="toc-importing-other-packages-code-practice" class="nav-link" data-scroll-target="#importing-other-packages-code-practice">Importing other packages: Code Practice</a></li>
  <li><a href="#how-to-export-functions-video" id="toc-how-to-export-functions-video" class="nav-link" data-scroll-target="#how-to-export-functions-video">How to export functions?: Video</a></li>
  <li><a href="#export-best-practice-quiz" id="toc-export-best-practice-quiz" class="nav-link" data-scroll-target="#export-best-practice-quiz">Export best practice: Quiz</a></li>
  <li><a href="#exporting-functions-code-practice" id="toc-exporting-functions-code-practice" class="nav-link" data-scroll-target="#exporting-functions-code-practice">Exporting functions: Code Practice</a></li>
  <li><a href="#documenting-other-elements-video" id="toc-documenting-other-elements-video" class="nav-link" data-scroll-target="#documenting-other-elements-video">Documenting other elements: Video</a></li>
  <li><a href="#adding-examples-code-practice" id="toc-adding-examples-code-practice" class="nav-link" data-scroll-target="#adding-examples-code-practice">Adding examples: Code Practice</a></li>
  <li><a href="#documenting-function-return-values-code-practice" id="toc-documenting-function-return-values-code-practice" class="nav-link" data-scroll-target="#documenting-function-return-values-code-practice">Documenting function return values: Code Practice</a></li>
  <li><a href="#additional-documentation-code-practice" id="toc-additional-documentation-code-practice" class="nav-link" data-scroll-target="#additional-documentation-code-practice">Additional documentation: Code Practice</a></li>
  <li><a href="#minimum-level-of-documentation-quiz" id="toc-minimum-level-of-documentation-quiz" class="nav-link" data-scroll-target="#minimum-level-of-documentation-quiz">Minimum level of documentation: Quiz</a></li>
  <li><a href="#documenting-a-package-video" id="toc-documenting-a-package-video" class="nav-link" data-scroll-target="#documenting-a-package-video">Documenting a package: Video</a></li>
  <li><a href="#adding-package-documentation-code-practice" id="toc-adding-package-documentation-code-practice" class="nav-link" data-scroll-target="#adding-package-documentation-code-practice">Adding package documentation: Code Practice</a></li>
  <li><a href="#documenting-data-objects-code-exercise" id="toc-documenting-data-objects-code-exercise" class="nav-link" data-scroll-target="#documenting-data-objects-code-exercise">Documenting data objects: Code Exercise</a></li>
  <li><a href="#creating-man-files-code-practice" id="toc-creating-man-files-code-practice" class="nav-link" data-scroll-target="#creating-man-files-code-practice">Creating man files: Code Practice</a></li>
  </ul></li>
  <li><a href="#chapter-3-checking-and-building-r-packages" id="toc-chapter-3-checking-and-building-r-packages" class="nav-link" data-scroll-target="#chapter-3-checking-and-building-r-packages">Chapter 3: Checking and Building R Packages</a>
  <ul class="collapse">
  <li><a href="#why-check-an-r-package" id="toc-why-check-an-r-package" class="nav-link" data-scroll-target="#why-check-an-r-package">Why check an R package?</a></li>
  <li><a href="#running-a-check-quiz" id="toc-running-a-check-quiz" class="nav-link" data-scroll-target="#running-a-check-quiz">Running a check: Quiz</a></li>
  <li><a href="#errors-warnings-and-notes" id="toc-errors-warnings-and-notes" class="nav-link" data-scroll-target="#errors-warnings-and-notes">Errors, warnings and notes</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Developing R Packages</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="chapter-1-the-r-package-structure" class="level2">
<h2 class="anchored" data-anchor-id="chapter-1-the-r-package-structure">Chapter 1: The R Package Structure</h2>
<p><code>create("packagename")</code> and <code>dir("packagename")</code></p>
<p>Creating a package can include:</p>
<ul>
<li>folders to store data</li>
<li>user guides (known as vignettes)</li>
<li>tests</li>
<li>demos</li>
<li>and others</li>
</ul>
<p>DESCRIPTION and NAMESPACE compulsory directories</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">create</span>(<span class="st">'datasummary'</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dir</span>(<span class="st">'datasummary'</span>) <span class="co">#to see what is in the package</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p>“DESCRIPTION”, “NAMESPACE”, “R”, “datasummary.Rproj”</p>
</blockquote>
<p>All the code for your package goes in the R directory</p>
<p><code>stop()</code> prints an error message</p>
<p>Optional Directories:</p>
<ul>
<li>data
<ul>
<li>stored as an rdata file</li>
<li><code>use_data()</code> function</li>
</ul></li>
<li>vignettes
<ul>
<li>user guide</li>
<li>demos</li>
<li>do not include spaces in the vignette name</li>
</ul></li>
<li>tests</li>
<li>compiled code</li>
<li>translations</li>
</ul>
<p>No subdirectories allowed</p>
<section id="use_-functions" class="level3">
<h3 class="anchored" data-anchor-id="use_-functions">use_* functions</h3>
<ul>
<li><code>use_data()</code> inserts data into the package/library? Creates the data directory too</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the weather data</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">use_data</span>(weather, <span class="at">pkg =</span> <span class="st">"datasummary"</span>, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>same for other <code>use_*()</code> functions</li>
</ul>
</section>
<section id="best-practice-for-structuring-code" class="level3">
<h3 class="anchored" data-anchor-id="best-practice-for-structuring-code">Best practice for structuring code</h3>
<p>I think this is for adding functions to the package/library</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>data_summary <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>){</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  num_data <span class="ot">&lt;-</span> <span class="fu">select_if</span>(x, <span class="at">.predicate =</span> is.numeric) </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(num_data, <span class="at">.f =</span> numeric_summary, <span class="at">na.rm =</span> <span class="cn">TRUE</span>, <span class="at">.id =</span> <span class="st">"ID"</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Write the function to the R directory</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="fu">dump</span>(<span class="st">"data_summary"</span>, <span class="at">file =</span> <span class="st">"datasummary/R/data_summary.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="chapter-2-documenting-packages" class="level2">
<h2 class="anchored" data-anchor-id="chapter-2-documenting-packages">Chapter 2: Documenting Packages</h2>
<section id="introduction-to-roxygen2" class="level3">
<h3 class="anchored" data-anchor-id="introduction-to-roxygen2">Introduction to roxygen2</h3>
<ul>
<li>help files (documentation)</li>
<li>allows adding a header to a function containing all the important information about the function</li>
<li>roxygen headers start with <code>#'</code></li>
<li>First assumed headers: title, description, details section
<ul>
<li>it is necessary that you seperate each one of them by a new line</li>
</ul></li>
<li>Other headers need special tags like <span class="citation" data-cites="param">@param</span>, <span class="citation" data-cites="author">@author</span>…
<ul>
<li><span class="citation" data-cites="param">@param</span> Example:
<ul>
<li><code>#' @param data A data frame or matrix from which rows are to be samples</code></li>
<li><code>#' @param size Numeric. Number of rows to return</code></li>
</ul></li>
<li>I think this is the latex-esk style of documentation</li>
</ul></li>
<li><code>@import package_name</code> to use functions from them rather than <code>library(package_name)</code> like in scripts
<ul>
<li>doing this makes the namespace and functions available to your package</li>
<li>you can also use the importfrom tag to import just a single package</li>
</ul></li>
</ul>
</section>
<section id="a-simple-function-header-code-practice" class="level3">
<h3 class="anchored" data-anchor-id="a-simple-function-header-code-practice">A simple function header: Code Practice</h3>
<p>The roxygen headers are included in the same script as the function code. You use roxygen comments #’ to identify a line as part of the roxygen header. You can include regular R comments in the header if you wish, using the usual comment character, #.</p>
<p>The first three lines of the header have special meaning and you don’t need to use tags to identify them. The first three lines are:</p>
<ul>
<li>title</li>
<li>description</li>
<li>details</li>
</ul>
<p>Since you don’t mention any tags to identify the first three lines, it is necessary that you seperate each one of them by a new line. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Title goes here</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' Description goes here</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' Details go here</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-overflow-scroll code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a title and description</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#' Numeric Summaries</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' Summarises numeric data and returns a data frame containing the minimum value, median, standard deviation, and maximum value</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>numeric_summary <span class="ot">&lt;-</span> <span class="cf">function</span>(x, na.rm){</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.numeric</span>(x)){</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">"Data must be numeric"</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>( <span class="at">min =</span> <span class="fu">min</span>(x, <span class="at">na.rm =</span> na.rm),</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>                <span class="at">median =</span> <span class="fu">median</span>(x, <span class="at">na.rm =</span> na.rm),</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>                <span class="at">sd =</span> <span class="fu">sd</span>(x, <span class="at">na.rm =</span> na.rm),</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>                <span class="at">max =</span> <span class="fu">max</span>(x, <span class="at">na.rm =</span> na.rm))</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="documenting-function-arguments-code-practice" class="level3">
<h3 class="anchored" data-anchor-id="documenting-function-arguments-code-practice">Documenting function arguments: Code Practice</h3>
<p>One of the most important aspects of a function to document are the arguments.</p>
<p>With roxygen you do this with the <span class="citation" data-cites="param">@param</span> tag. You follow the tag with the argument name and then any details the user needs to know.</p>
<p>If there is a lot of information that you need to provide about an argument you might want to consider putting this in the <code>details</code> section instead.</p>
<p>Normally you must document every argument of your function, but in this exercise you’ll just document the first argument and come back to the second one later!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-overflow-scroll code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Numeric Summaries</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' Summarises numeric data and returns a data frame containing the minimum value, median, standard deviation, and maximum value.</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Add appropriate tag and details to document the first argument</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param x a numeric vector containing the values to summarize.</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>numeric_summary <span class="ot">&lt;-</span> <span class="cf">function</span>(x, na.rm){</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.numeric</span>(x)){</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stop</span>(<span class="st">"data must be numeric"</span>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>( <span class="at">min =</span> <span class="fu">min</span>(x, <span class="at">na.rm =</span> na.rm),</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>                <span class="at">median =</span> <span class="fu">median</span>(x, <span class="at">na.rm =</span> na.rm),</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>                <span class="at">sd =</span> <span class="fu">sd</span>(x, <span class="at">na.rm =</span> na.rm),</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>                <span class="at">max =</span> <span class="fu">max</span>(x, <span class="at">na.rm =</span> na.rm))</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="importing-other-packages-code-practice" class="level3">
<h3 class="anchored" data-anchor-id="importing-other-packages-code-practice">Importing other packages: Code Practice</h3>
<p>If you wish to use functions from other packages, you should import them in your roxygen header. You can use <code>@import</code> to import an entire package, or <code>@importFrom</code> to import a single function. To show you how <code>@importFrom</code> works, we have imported the <code>gather()</code> function from the tidyr package for you (although it’s not needed in this case).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-overflow-scroll code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Summary of Numeric Columns</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' Generate specific summaries of numeric columns in a data frame</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' </span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param x A data frame. Non-numeric columns will be removed</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param na.rm A logical indicating whether missing values should be removed</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#' @import purrr</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#' @import dplyr</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co">#' @importFrom tidyr gather</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>data_summary <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>){</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  num_data <span class="ot">&lt;-</span> <span class="fu">select_if</span>(x, <span class="at">.predicate =</span> is.numeric) </span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(num_data, <span class="at">.f =</span> numeric_summary, <span class="at">na.rm =</span> na.rm, <span class="at">.id =</span> <span class="st">"ID"</span>)</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>so I think these tags are both for reading documentation output and the words actually have actions behind them like <code>@import</code> telling us what other packages is being imported and the actually making it imported too</li>
</ul>
</section>
<section id="how-to-export-functions-video" class="level3">
<h3 class="anchored" data-anchor-id="how-to-export-functions-video">How to export functions?: Video</h3>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Transcript
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>How to export functions? Exported functions are ones which are visible to the end user.</p></li>
<li><p>Exported functions That means that when they load your package, they’ll be able to use these functions. Non-exported functions are those which you don’t want to be visible to the end user. So you might have things like utility functions that are called by the other functions in your package, but you don’t actually want people using them directly. You document your exported functions using roxygen headers, and then when you build your package, your exported functions are automatically listed in the NAMESPACE file. Next, you’ll be taking a look at examples of exported and non-exported functions.</p></li>
<li><p>Exported and non-exported functions This is a function from the simutils package called sum_na. It counts all the missing values in a vector and returns the total. As you can see, there is no “<code>@export</code>” tag, so this function is not exported. As you’ll see in a moment, it is a utility function to be used by other functions from this package, but not one that you want the end user to access. Now let’s take a look at another function from simutils.</p></li>
<li><p>Exported and non-exported functions This function is also from simutils and is called na_counter. It takes a DataFrame or matrix as input, verifies the object input type, and then applies the sum_na function you saw in the last slide to each column of the input DataFrame or matrix. This function does contain an “<code>@export</code>” tag and so is exported and available to the end user. Now let’s take a look at how you can refer to these functions.</p></li>
<li><p>Exported and non-exported functions Imagine the simutils package has been built and you’ve now installed it. You can use the <code>library()</code> function to load the package, and then, call <code>na_counter()</code> or any other exported function from the package NAMESPACE to use them. But, what if you try to use the <code>sum_na()</code> function in the same way?</p></li>
<li><p>Calling non-exported functions This time, you get an error, telling you that sum_na() could not be found. This happens because only the exported functions from the simutils package are loaded. So how do you access the sum_na() function then?</p></li>
<li><p>Calling non-exported functions If you want to refer to non-exported functions, you must type the name of a package, then three colons, and then the function name, like in the example here. This calls the function directly, instead of searching for it in the NAMESPACE. OK, so that was an introduction to exported and non-exported functions, and how to call them. Now let’s take a look at how you use the roxygen header to specify if a function should be exported.</p></li>
<li><p>Exporting functions with roxygen headers When you use the “<span class="citation" data-cites="export">@export</span>” tag, this indicates that the function should be exported. You can see that this function has been exported - so the end user of the package will be able to make use of it. If you don’t want to export a function, just don’t include the tag at all in your roxygen header.</p></li>
<li><p>Let’s practice! Now let’s take a look at how exporting functions applies to your dataSummary package!</p></li>
</ol>
</div>
</div>
</div>
<ul>
<li>Exported functions are ones which are visible to the end user</li>
<li>the opposite are utility functions (things that happen in the background of exported functions)</li>
<li>this example’s tags are in this order: param, import, return, export, examples</li>
<li>If you want to refer to non-exported functions use the <code>:::</code> call
<ul>
<li>Example: <code>packagename:::non_exported_function()</code></li>
</ul></li>
</ul>
</section>
<section id="export-best-practice-quiz" class="level3">
<h3 class="anchored" data-anchor-id="export-best-practice-quiz">Export best practice: Quiz</h3>
<ul>
<li>utility functions (non-exported functions) are low-level functions</li>
<li>user functions (exported functions) are high-level functions</li>
</ul>
</section>
<section id="exporting-functions-code-practice" class="level3">
<h3 class="anchored" data-anchor-id="exporting-functions-code-practice">Exporting functions: Code Practice</h3>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Although the NAMESPACE file is used to identify functions that are exported you use roxygen tags to create this file. This makes it really easy to see, right next to the function, if your users will be able to work with it or not.</p>
<p>We mark a function for exporting using the tag <span class="citation" data-cites="export">@export</span>.</p>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Code
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-overflow-scroll code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Summary of Numeric Columns</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' Generate specific summaries of numeric columns in a data frame</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' </span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param x A data frame. Non-numeric columns will be removed</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param na.rm A logical indicating whether missing values should be removed</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">#' @import dplyr</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">#' @import purrr</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">#' @importFrom tidyr gather</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">#' @export</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>data_summary <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>){</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  num_data <span class="ot">&lt;-</span> <span class="fu">select_if</span>(x, <span class="at">.predicate =</span> is.numeric) </span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(num_data, <span class="at">.f =</span> numeric_summary, <span class="at">na.rm =</span> na.rm, <span class="at">.id =</span> <span class="st">"ID"</span>)</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="documenting-other-elements-video" class="level3">
<h3 class="anchored" data-anchor-id="documenting-other-elements-video">Documenting other elements: Video</h3>
<ul>
<li><code>\dont_run{}</code> for the <span class="citation" data-cites="examples">@examples</span> tag section</li>
<li><code>\code{}</code> for the <span class="citation" data-cites="return">@return</span> tag section</li>
<li>This function’s tags are: param, param, author, import, return, export, examples</li>
<li>Other tags include: seealso, notes</li>
</ul>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Transcript
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>Documenting other elements</p></li>
<li><p>Documenting examples You can include “<span class="citation" data-cites="examples">@examples</span>” in your function documentation to demonstrate how to use it. You should provide at least one example for any function that is exported, and for any functions that have complicated arguments. Examples should ideally be easily reproducible and should not cause an error. If you are going to publish your package to CRAN then there are recommendations of what is considered a reasonable time for your examples to run in, so make sure to check what these are at the time of submission before you do submit. This is how you might include an example of how to run a function in a roxygen header. The examples tag goes next to code examples of running the function.</p></li>
<li><p>Non-running examples Your examples are automatically run during the package checking stage, which we’ll be talking about later. In certain circumstances, you might want to include examples of how to run a function without these examples actually being run. For instance, if your function relies on the user providing an API key or being connected to a database. You can use the “” run markup tag to include an example which will not be run during the checking stage.</p></li>
<li><p>Documenting function return values You can use the “<span class="citation" data-cites="return">@return</span>” tag to document the output of the function. This is where you can tell users what they can expect to get from the function, whether that’s data, a graphic or any other output. In the example here, after the “<span class="citation" data-cites="return">@return</span>” tag, we’ve included a short sentence describing the return object. The use of the “” markup tag here affects the formatting of the word ‘size’ to indicate to the end user that we’re referring to one of the parameters.</p></li>
<li><p>Additional documentation There are a number of other things you might choose to document. You can use the “<span class="citation" data-cites="author">@author</span>” tag to tell the end user who wrote the function like we’ve done here. There’re other tags you might also want to use, for example, you can use the “<span class="citation" data-cites="seealso">@seealso</span>” tag to include a link to other functions that are in some way closely related to your function. And you might want to use the “<span class="citation" data-cites="notes">@notes</span>” tag to add any other notes relating to the function, for instance, if it’s experimental or likely to change.</p></li>
<li><p>Let’s practice! Now let’s try some examples.</p></li>
</ol>
</div>
</div>
</div>
</section>
<section id="adding-examples-code-practice" class="level3">
<h3 class="anchored" data-anchor-id="adding-examples-code-practice">Adding examples: Code Practice</h3>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Examples are the way that your end users will learn how to work with your code. You should provide at least one example for any function that is exported. If there are any tricky arguments to your function you might also want to consider examples for those.</p>
<p>Examples should ideally be easily reproducible and should not cause an error. If you are going to publish your package to CRAN then examples should also run in a reasonable time, CRAN sets this to around 15 minutes but it’s worth double checking the recommendations at the time of submission.</p>
<p>You add examples using the <span class="citation" data-cites="examples">@examples</span> tag. Examples will typically span multiple lines. This is fine as <code>roxygen</code> will assume that everything is part of the examples until it finds another tag.</p>
</div>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Code
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-overflow-scroll code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Data Summary for Numeric Columns</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' Custom summaries of numeric data in a provided data frame</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param x A data.frame containing at least one numeric column</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param na.rm A logical indicating whether missing values should be removed</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">#' @import dplyr</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co">#' @import purrr</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">#' @importFrom tidyr gather</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">#' @export</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co">#' @examples </span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co">#' data_summary(iris)</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co">#' data_summary(airquality, na.rm = FALSE)</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>data_summary <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>){</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  num_data <span class="ot">&lt;-</span> <span class="fu">select_if</span>(x, <span class="at">.predicate =</span> is.numeric) </span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(num_data, <span class="at">.f =</span> numeric_summary, <span class="at">na.rm =</span> na.rm, <span class="at">.id =</span> <span class="st">"ID"</span>)</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="documenting-function-return-values-code-practice" class="level3">
<h3 class="anchored" data-anchor-id="documenting-function-return-values-code-practice">Documenting function return values: Code Practice</h3>
<ul>
<li>I’m not sure if</li>
</ul>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>You document the return value of a function using the tag <span class="citation" data-cites="return">@return</span>. This is where you can tell users what they can expect to get from the function, be that data, a graphic or any other output.</p>
<p>When you write documentation you may want to format the text to look like code, link to other functions or, particularly for return objects, format as a bulleted list. You can do this using special formatting:</p>
<ul>
<li>For code you use <code>\code{text to format}</code></li>
<li>To link to other functions you use <code>\link[packageName]{functionName}</code>, although note the package name is only required if the function is not in your package</li>
<li>To include an unordered list you use <code>\itemize{}</code>. Inside the brackets you mark new items with
followed by the item text.</li>
</ul>
</div>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Code
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-overflow-scroll code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Data Summary for Numeric Columns</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' Custom summaries of numeric data in a provided data frame</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param x A data.frame containing at least one numeric column</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param na.rm A logical indicating whether missing values should be removed</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">#' @import dplyr</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co">#' @import purrr</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co">#' @importFrom tidyr gather</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co">#' @export</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co">#' @examples</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co">#' data_summary(iris)</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co">#' data_summary(airquality, na.rm = FALSE)</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Update the details for the return value</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co">#' @return </span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co">#' This function returns a \code{data.frame} including columns: </span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co">#' \itemize{</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="co">#'  \item ID</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="co">#'  \item min</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="co">#'  \item median</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="co">#'  \item sd</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="co">#'  \item max</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="co">#' }</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="co">#' @export</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>data_summary <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>){</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>  num_data <span class="ot">&lt;-</span> <span class="fu">select_if</span>(x, <span class="at">.predicate =</span> is.numeric) </span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(num_data, <span class="at">.f =</span> numeric_summary, <span class="at">na.rm =</span> na.rm, <span class="at">.id =</span> <span class="st">"ID"</span>)</span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="additional-documentation-code-practice" class="level3">
<h3 class="anchored" data-anchor-id="additional-documentation-code-practice">Additional documentation: Code Practice</h3>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Beyond the functions arguments and return values there are many additional items that can be provided in function help files. From who wrote that function to other functions that you might be interested in using. We will also see later how we can identify dependencies using the roxygen header.</p>
<p>Other tags that we can use include:</p>
<ul>
<li><code>@author</code> to identify who wrote the function.</li>
<li><code>@seealso</code> to list other functions that may be of interest to users.</li>
<li><code>@notes</code> to add any other notes relating to the function (e.g.&nbsp;if its experimental, likely to change etc.)</li>
</ul>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Code
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-overflow-scroll code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Summary of Numeric Columns</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#' Generate specific summaries of numeric columns in a data frame</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param x A data frame. Non-numeric columns will be removed</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param na.rm A logical indicating whether missing values should be removed</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">#' @import dplyr</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">#' @import purrr</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">#' @importFrom tidyr gather</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">#' @export</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co">#' @examples</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co">#' data_summary(iris)</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co">#' data_summary(airquality, na.rm = FALSE)</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co">#' </span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co">#' @return This function returns a \code{data.frame} including columns: </span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co">#' \itemize{</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co">#'  \item ID</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="co">#'  \item min</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co">#'  \item median</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="co">#'  \item sd</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="co">#'  \item max</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="co">#' }</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="do">## Add in the author of the `data_summary()` function</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a><span class="co">#' @author </span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="co">#' My Name &lt;myemail@example.com&gt;</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a><span class="do">## List the `summary()` function (from the `base` package)</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a><span class="co">#' @seealso</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a><span class="co">#' \link[base]{summary}</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>data_summary <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>){</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>  num_data <span class="ot">&lt;-</span> <span class="fu">select_if</span>(x, <span class="at">.predicate =</span> is.numeric) </span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(num_data, <span class="at">.f =</span> numeric_summary, <span class="at">na.rm =</span> na.rm, <span class="at">.id =</span> <span class="st">"ID"</span>)</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="minimum-level-of-documentation-quiz" class="level3">
<h3 class="anchored" data-anchor-id="minimum-level-of-documentation-quiz">Minimum level of documentation: Quiz</h3>
<ul>
<li>When producing documentation for a function, they say the function title and documentation of all function arguments are required but documentation of the return value, although it ca be useful to the user</li>
</ul>
</section>
<section id="documenting-a-package-video" class="level3">
<h3 class="anchored" data-anchor-id="documenting-a-package-video">Documenting a package: Video</h3>
<ul>
<li>Whereas before we were documenting functions, now we’re on package</li>
<li>What are the similarities and differences of devtools and ryxogen?</li>
</ul>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Transcript
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>Documenting a package You’ve just learned how to document <em>functions</em> using roxygen headers. Now you’re going to take a look at how you can document <em>other components</em> of your package.</p></li>
<li><p>Package level documentation You can also generate the documentation for the package itself using roxygen2. For package documentation, you need to include the tags “<span class="citation" data-cites="docType">@docType</span>” and “<span class="citation" data-cites="name">@name</span>”. The header itself needs to be followed by the package keyword because all roxygen headers need to be followed by some form of R code. Whilst this header can go in any file, a good practice is to create a separate R script which takes the package name that contains this header. This is how this might look in the simutils package. You’d save it in a file called “simutils(dot)R” in the R directory.</p></li>
<li><p>Minimum level of documentation In the previous section of the course, you learned numerous aspects of a function that can be documented, but what is the absolute minimum level of documentation for a function? As a minimum, documentation for each function in your package should include the function title, the function description, the names and descriptions for all of the arguments, and if necessary, an export tag. The other components of documentation aren’t necessarily needed, but you should include them if you think they’re going to be useful to the end user of your package.</p></li>
<li><p>Documenting data objects Many packages include data that are used in examples or for reference in functions within the package. Data that you want any user of the package to see can be included in the data directory. The data needs to be appropriately compressed and this, as well as the package structure, will be handled for you by the “use_data()” function in devtools. Here’s an example of how you’d take a DataFrame in your current environment, in this case, a DataFrame called “sim_dat”, and then compress it and put the compressed file in the data directory, all with just a single function call.</p></li>
<li><p>Documenting data objects As with any object that is visible to the end user you need to provide some corresponding documentation for your datasets. You can also do this using roxygen2 but using alternative tags format and source to describe the format of the data and the original source - where you got it from. Here’s an example of how to document the “sim_dat” dataset to be included in the simutils package.</p></li>
<li><p>Creating man files Once you have created function headers and the package help file you can create the “(dot)Rd” files for the package, which go in the man directory, using the document function in devtools. The primary argument to this function is the file path to the top level of the package. This will perform the task of creating or updating all of the “(dot)Rd” files as well as the NAMESPACE file.</p></li>
<li><p>Let’s practice! OK, so now it’s your turn to document your package!</p></li>
</ol>
</div>
</div>
</div>
</section>
<section id="adding-package-documentation-code-practice" class="level3">
<h3 class="anchored" data-anchor-id="adding-package-documentation-code-practice">Adding package documentation: Code Practice</h3>
<ul>
<li></li>
</ul>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>In addition to the individual functions you can also document the whole package.</p>
<p>When you document a package you can use all of the same tags as for functions but the problem that you have is that there is no R code to document. Instead you put the keyword “_PACKAGE” underneath your package header.</p>
<p>You should also use the <span class="citation" data-cites="docType">@docType</span> and <span class="citation" data-cites="name">@name</span> tags to indicate that this is package level documentation, and specify your package name.</p>
<p>You should then save the package documentation in the R directory in a file ending with .R with the same name as the package.</p>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Code
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-overflow-scroll code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' datasummary: Custom Data Summaries</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' Easily generate custom data frame summaries</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' @docType package</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co">#' @name datasummary</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="st">"_PACKAGE"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="documenting-data-objects-code-exercise" class="level3">
<h3 class="anchored" data-anchor-id="documenting-data-objects-code-exercise">Documenting data objects: Code Exercise</h3>
<ul>
<li></li>
</ul>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you include a data set in your package you must also provide documentation for it. As with package level documentation, you should include a title and description.</p>
<p>With a data set, once again, there is no function object to document. You instead give the name of the dataset as a character string, for instance “airquality”. Additionally there are two tags that you need to use:</p>
<ul>
<li><code>@format</code> to describe the format of the data. This is often used with the describe format.</li>
<li><code>@source</code> to identify where the data came from. You should then save the package documentation in the R directory with a suitable name (in the above case, either airquality.R or data.R).</li>
</ul>
<p>The weather dataset is available in your workspace. Run <code>print(weather)</code> to view it.</p>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Code
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-overflow-scroll code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Random Weather Data</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' A dataset containing randomly generated weather data.</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' @format A data frame of 7 rows and 3 columns</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#' \describe{</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">#'  \item{Day}{Numeric values giving day of the week, 1 = Monday, 7 = Sunday}</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#'  \item{Temp}{}</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">#'  \item{Weather}{}</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co">#' }</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co">#' @source Randomly generated data </span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="st">"weather"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="creating-man-files-code-practice" class="level3">
<h3 class="anchored" data-anchor-id="creating-man-files-code-practice">Creating man files: Code Practice</h3>
<ul>
<li><code>document()</code> builds all documentation for a package</li>
<li>it seems like all the devtools packages take their arguments in quotation marks.</li>
<li><code>help()</code> is the devtools version of <code>?</code> and <code>??</code></li>
</ul>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Once you’ve created your documentation using roxygen headers, you need to build your documentation. You can use the document() function from the devtools package to generate your documentation, supplying the path to the package as the first argument. The generated documentation will appear in the man directory. Once you’ve documented your package, you can view the help files just like you can with any of your existing packages.</p>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Code
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-overflow-scroll code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate package documentation</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">document</span>(<span class="st">"datasummary"</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the contents of the man directory</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dir</span>(<span class="st">"datasummary/man"</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># View the documentation for the data_summary function</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="st">"data_summary"</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co"># View the documentation for the weather dataset</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="st">"weather"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p><br></p>
</section>
</section>
<section id="chapter-3-checking-and-building-r-packages" class="level2">
<h2 class="anchored" data-anchor-id="chapter-3-checking-and-building-r-packages">Chapter 3: Checking and Building R Packages</h2>
<section id="why-check-an-r-package" class="level3">
<h3 class="anchored" data-anchor-id="why-check-an-r-package">Why check an R package?</h3>
<ul>
<li>Checking a package (<code>package(".")</code>) makes sure vignettes can be built, unit tests in the package pass, and all function arguments have been documented.</li>
</ul>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Transcript
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>Why check an R package? You have now done everything that you need to do, as a minimum, to turn your directory structure into a package that you can share with other people. Hopefully, you have done everything exactly as you should have done but sometimes we miss things, put information in the wrong place or forget to include something really important like documentation. So before you build the package it’s good practice to check it.</p></li>
<li><p>What should you check? There is a very long list of checks that should be performed regardless of how you are sharing your code, and in fact, must be performed for submission to CRAN. You can think of this as a basic quality check to make sure that you haven’t forgotten to add documentation for a function and that you have listed all of the dependencies correctly. But you should note that these checks will not check that your code does what you think it is doing. That’s for you to do and unit testing that you will see later can help you out here. If you have included tests, it will ensure that they all pass and if you have included a vignette it will ensure that it can be built. In total there are over 50 checks that need to be performed.</p></li>
<li><p>Running a check The good news is that you don’t have to do this manually. There is a system level tool that is provided with R that runs all of these checks and to make it even easier, devtools includes a check function that accesses this tool for you. By default, this function will even re-run the document function for you, just in case you forgot after making changes. It will also by default run with the same settings used by CRAN. Whilst you can turn this off you might as well leave it set as it does mean that your package is CRAN compatible should you decide to share it that way. There are a number of other options that you can set and checks that you can turn off but most of the time you will simply run with the defaults.</p></li>
<li><p>Errors, warnings, and notes Once all of the checks have run the output will give you a summary of each of the checks and the status of that check. All being well everything will simply say OK. At some point though you will get an error, warning or note as the result of a check. An error is something that you must fix. It means there is a problem with your package that will cause problems for the end user. A warning is less problematic but you should still try fixing them. They typically highlight something that means it’s likely that the package can be used without issue but may cause a problem. This could relate to dependencies, documentation or elements of the code. Notes are the least problematic. Whilst you don’t have to fix all notes, especially if you are not submitting to CRAN, it is still recommended that you do try. Some notes, such as an unconventional license file, can’t be solved. This is fine, even if submitting to CRAN, but you will be expected to explain why you should be allowed this exception.</p></li>
<li><p>Let’s practice! Let’s practice this by checking the package that you have been creating and trying to resolve some common check issues.</p></li>
</ol>
</div>
</div>
</div>
</section>
<section id="running-a-check-quiz" class="level3">
<h3 class="anchored" data-anchor-id="running-a-check-quiz">Running a check: Quiz</h3>
</section>
<section id="errors-warnings-and-notes" class="level3">
<h3 class="anchored" data-anchor-id="errors-warnings-and-notes">Errors, warnings and notes</h3>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Transcript
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>Errors, warnings and notes With over 50 checks to be performed, there are a large number of possible errors, warnings and notes that could be returned. The good news is that if you have used devtools, it’s likely that you will only encounter a small number of the most common issues.</p></li>
<li><p>Package dependencies Some of the most common check issues relate to package dependencies. When you run your check, all of the dependencies of your package must be available. If they are not then the checks can’t be run and you will get an error. In the case of building a package using continuous integration, if you include a package that is not available on the system you are building on, you will also get an error.</p></li>
<li><p>Documentation You will often find that you see issues in your check relating to documentation, even if you are using roxygen as we saw in the last chapter. Common issues here relate to undocumented function arguments. If you have added an argument to a function or changed its name and not remembered to add the new argument to the function header, then you will see a check issue. The check will also let you know if you have forgotten to document a function entirely.</p></li>
<li><p>Documentation Another common documentation issue relates to the examples. As we said in the last chapter, your examples must run. Any example that fails for any reason will cause a check error. The most common cause of this is making changes to the function itself but not updating the example. If you want to include an example that deliberately fails then you need to use the “” functionality. The “runExample()” function can be helpful for checking just the examples in your help files, rather than waiting to run the whole check to find out if there is a problem.</p></li>
<li><p>PDF documentation When it comes to the PDF documentation, problems here relate to Latex. The first thing to make sure is that you have Latex installed and that R can find it.</p></li>
<li><p>Tests You haven’t seen unit tests yet but once you have included them they all need to pass for your check to pass. You will see more on this later so there is no need to worry about it right now.</p></li>
<li><p>Let’s practice! Time to put this into practice.</p></li>
</ol>
</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>